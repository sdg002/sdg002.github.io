<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>RANSAC Circle</title>
    <style>
        body
        {
            font-family:Arial
        }
        img.examples
        {
            /*width:200px;height:200px;border-width:1px;border-style:solid;*/
        }
    </style>
</head>
<body>

    <h1>Introduction</h1>
    <p>
        The RANSAC (Random sample and consensus) algorithm is the <strong>gold standard</strong> in eliminating noise. A while ago, I wrote an <a href="https://medium.com/@saurabh.dasgupta1/outlier-detection-using-the-ransac-algorithm-de52670adb4a">article</a>   on how the RANSAC algorithm is implemented for finding the model of a straight line in a noisy field of points.
        The RANSAC algorithm in its original form was developed around finding straight line models when presented with noisy visual data. In this article, I will explore how to implement the RANSAC algorithm a circle model in a noisy set of points. I hope that by the end of this article you will appreciate how beautiful RANSAC is. Sometimes, I get carried away and visualize that human brain is perhaps doing some sort of RANSAC deep inside. Enough!
    </p>
    <img src="circle-images/HumanMind_StraightLine_Ransac.PNG" />
    <p>
        The example shown above exhibits how noise can impact the outcome of the least squares fitting algorithm. The human mind can easily spot the outlier, but the least squares algorithm cannot. This is where RANSAC steps in. RANSAC is a simple voting based algorithm that iteratively samples the population of points and find the subset of those lines which appear to conform.
    </p>

    <hr />

    <h1>Problem definition</h1>
    <p>
        Consider the points shown below. It is not difficult to spot there is a nice circle that can be traced out of the points only if we exclude the 2 noisy points on the far right of the visual.
    </p>
    <img src="circle-images/Simple.png" />

    <h2>Fitting a circle - using Gradient descent algorithm</h2>
    <p>The output after finding the best fitting circle is presented below.</p>
    <img src="circle-images/Simple_After_GradientDescent.png" />

    <h2>Fitting a circle -  using RANSAC</h2>
    <p>
        The output after using RANSAC to take into account the outliers. Notice that the algorithm has nicely detected the noisy points on the far right
    </p>
    <img src="circle-images/Simple_After_Ransac.png" />

    <hr />

    <h1>Understanding the RANSAC algorithm for fitting a circle</h1>

    <h2>Key definitions</h2>
    <img src="circle-images/sketch.io.RANSAC-definitions.png" />

    <p>
        <strong>Model circle:</strong>
        The candidate circle which we think fits the points
    </p>


    <p>
        <strong>Threshold distance:</strong>
        Used for creating a doughnut like concentric circles with the model circle in the middle
    </p>


    <p>
        <strong>Outlier point:</strong>
        Any point outside the doughnut region
    </p>


    <p>
        <strong>Inlier point:</strong>
        Any point within the doughnut region
    </p>


    <p>
        <strong>Threshold inlier count:</strong>
        Minimum number of inliers points for a candidate circle to be selected
    </p>


    <h2>Initialize essential parameters</h2>
    <ol>
        <li>Select a threshold distance - <strong>threshold distance </strong> </li>
        <li>Select a threshold count of inliners - <strong>threshold inlier count</strong></li>
        <li>Select maximum number of samplings - <strong>max iterations</strong></li>
    </ol>

    <h2>Build a shortlist of candidate circles</h2>
    <strong>do it via Power point or Draw IO</strong>

    <p>
        Consider the following arrangement of points
    </p>

    <ol>
        <li>Select any 3 points</li>
        <li>find the circle passing through these 3 points</li>
        <li>Use *threshold* and find all points which lie in the doughnut. These are the inliers.</li>
        <li>If the count is less than *min inlier count* then skip this model.</li>
        <li>Otherwise shortlist this model</li>
        <li>Use all the inlier points and find the best fitting circle. Compute mean squared error</li>
        <li>Repeat above steps for *max iterations* number of times</li>
    </ol>

    <h1>RANSAC examples</h1>

    <h2>Example 1</h2>
    <h3>Before</h3>
    <img src="circle-images/NoisyCircle_x_-5_y_5_r_19_d_0.40_sp_0.80_w_25_h_25.197.png" class="examples" />
    <h3>After</h3><br />
    <img src="circle-images/NoisyCircle_x_-5_y_5_r_19_d_0.40_sp_0.80_w_25_h_25.197.result.png" class="examples" />

    <h2>Example 2</h2>
    <h3>Before</h3>
    <img src="circle-images/NoisyCircle_x_36_y_-12_r_57_d_0.40_sp_0.90_w_50_h_50.15.png" class="examples" />
    <h3>After</h3><br />
    <img src="circle-images/NoisyCircle_x_36_y_-12_r_57_d_0.40_sp_0.90_w_50_h_50.15.results.png" class="examples" />


    <h2>Example 3</h2>
    <h3>Before</h3>
    <img src="circle-images/NoisyCircle_x_-4_y_51_r_33_d_0.40_sp_0.90_w_50_h_50.16.png" class="examples" />
    <h3>After</h3><br />
    <img src="circle-images/NoisyCircle_x_-4_y_51_r_33_d_0.40_sp_0.90_w_50_h_50.16.results.png" class="examples" />

    <h2>Example 4</h2>
    <h3>Before</h3>
    <img src="circle-images/NoisyCircle_x_-15_y_-7_r_58_d_0.40_sp_0.90_w_50_h_50.14.png" class="examples" />
    <h3>After</h3><br />
    <img src="circle-images/NoisyCircle_x_-15_y_-7_r_58_d_0.40_sp_0.90_w_50_h_50.14.results.png" class="examples" />

    <h2>Example 5</h2>
    <h3>Before</h3>
    <img src="circle-images/NoisyCircle_x_36_y_15_r_21_d_0.40_sp_0.80_w_25_h_25.198.png" class="examples" />
    <h3>After</h3><br />
    <img src="circle-images/NoisyCircle_x_36_y_15_r_21_d_0.40_sp_0.80_w_25_h_25.198.result.png" class="examples" />

</body>
</html>