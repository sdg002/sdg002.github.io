<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>

    <title>Using the mean nearest neighbour distance to arrive at RANSAC threshold computation</title>
    <meta http-equiv="refresh" content="5">
    <style>
        body {
            font-family: Arial
        }

        img.examples {
            /*width:200px;height:200px;border-width:1px;border-style:solid;*/
        }
    </style>
    <script src="../auto-refresh.js"></script>
</head>

<body>

    <header>
        <h1>
            Nearest neighbour distance metric approach to determine the RANSAC threshold
        </h1>

    </header>
    <h2>
        Introduction
    </h2>
    <p>
        The RANSAC algorithm is a very robust and a well established approach to determinine the straight line(s) which fit a noisy set of data points. 
        In this article I have explored the possiblity of using the Nearest Neighbour Distance statistic 
        as a means of arriving at the RANSAC threshold distance parameter
    </p>
    <h2>
        What problem does the RANSAC algorithm solve?
    </h2>
    <p>
        Consider the data points below.
        We have a mix of inliers (black) and outliers (red). We want to find the model of the straight line which fits the inliers. 
        The human mind can easily distinguish the inliers from the outliers and produce a line which neatly fits all the inliers.
        <br />
        <img src="images/all_data_points.png" alt="All data points" />
        <br />
        RANSAC is a simple voting-based algorithm that iteratively samples the population of points and find the subset of those lines which appear to conform to a model. In this case, the model is a straight line.
        <img src="images/desired_line_mind.png" alt="All data points" />
        <br />
        Least squares method will encompass all points thereby producing a line which is away from the desired line
        <br />
        <img src="images/actual_line_leastsquares.png" alt="All data points" />
    </p>
    <hr />

    <h2>
        How does the RANSAC algorithm work?
    </h2>
    <p>
        This is not a detailed discussion on RANSAC. 
        <br />
        <img src="images/Wikipedia_RANSAC_Inliers_and_Outliers.png" alt="Outliers, inliers and threshold distance" />
        <br />
        Copyright information for this image can be found <a href="https://commons.wikimedia.org/w/index.php?curid=37017886">here</a>
    </p>
    <ol>
        <li>Pick any N random points from the entire population</li>
        <li>Find the line using Least Squares which fits the N points</li>
        <li>Find all points which are inliers to this new line. Inliers are points which are within threshold distance 'd' of the line</li>
        <li>Repeat the above for a configured number of trials.</li>
        <li>The line which produces the highest inliers is the winnder</li>
    </ol>
    <p>
        <br />
        Detailed working of the RANSACA can be found in this <a href="https://en.wikipedia.org/wiki/Random_sample_consensus">Wikipedia article</a> 
        and <a href="https://medium.com/mlearning-ai/outlier-detection-using-the-ransac-algorithm-de52670adb4a">my article on Medium</a> .
    </p>
    <hr />


    <h2>
        What problem are we attempting to address in this article?
    </h2>
    <p>
        How do we determine the optimum RANSAC threshold parameter 'd'? 
        <br />
        <img src="images/find_the_optimum_ransac_threshold_distance.png" alt="Determine threshold distance"/>
        <br />
        Too large and RANSAC will accept potentialoutliers. 
        Too small and RANSAC might not find anything at all.
    </p>
    <hr />

    <h2>
        What is the the intuition behind Nearest Neighbour Distance?
    </h2>
    <p>
        <strong>What is Nearest Neighbour Distance (NNE)?</strong><br />
        Consider the points displayed in this image. By definition, every point has 1 one point which is closest. You could have multiple points which are equidistant and hence multiple nearest neighbours. But for this discussion we will pick the closest neighbour.
        <br />
        <img src="images/nne_introduction.png" alt="NNE introduction"/>
    </p>
    <ol>
        <li>
            Point 2 is the nearest neighbour of point 1
        </li>
        <li>
            Point 2 is the nearest neighbour of point 4 and vice-versa
        </li>
        <li>
            Point 4 is the nearest neighbour of point 3
        </li>
        <li>
            Point 4 is the nearest neighbour of point 5
        </li>
    </ol>
    <img src="images/definition_average_nne.png" alt="Definition of average NNE"/>
    <p>
        <br />
        <strong>What was the inspiration for using NNE distance?</strong>
        <br />
        The NNE statistic gives us an idea of how close or spread out the data points are.
        The RANSAC threshold distance parameter must have some correlation with the mean or median NNE.
        
        <br />

    </p>
    <hr />

    <h2>
        How to calculate the the nearest neighbour distance?
    </h2>
    <p>
        Refer to my article on NNE
        <br />
        Show some snippet
        <br />
        Show picture from old article explaining what NNE distance is.
        <br />
        <img src="images/workinprogress.png" />
    </p>


    <hr />
    <h2>
        Results - When image contains a one line
    </h2>
    <p>
        Different images (SP,MAXD) vs THRESHOLD (factor * mean nne)
        <br />
        <img src="images/workinprogress.png" />
    </p>

    <h2>
        Results - When image contains two lines
    </h2>
    <p>
        Different images (SP,MAXD) vs THRESHOLD (factor * mean nne)
        <br />
        <img src="images/workinprogress.png" />
    </p>

    <h2>
        Accompanying source code
    </h2>
    <p>
        Show folder structure
        <br />
        explain the purpose of the Python files
    </p>

    <h2>
        Generating noisy images
    </h2>
    <p>
        explain which file, what to run
    </p>




</body>

</html>